<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Soundbath User Testing</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta name="rnbo-version" content="1.0.0-alpha.5">
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.js"></script>
    <script type="text/javascript" src="https://cdn.cycling74.com/rnbo/latest/rnbo.min.js"></script>
    <style>
        body { margin: 0; padding: 0; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; }
        #helpIcon {
            position: absolute;
            top: 30px;
            right: 30px;
            max-width: 7%;
            max-height: 7%;
            z-index: 100;
        }
        #popupBox {
            display: none; /* This line ensures the popup box is hidden on initial page load */
            position: absolute;
            top: calc(30px + 7%);
            right: 30px;
            width: 225px;
            height: auto;
            max-height: 210px;
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.9);
            z-index: 99;
            border: 1px solid #ccc;
            padding: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            border-radius: 5px;
        }

        #popupBox p {
            margin-top: 10px;
            margin-bottom: 10px;
            line-height: 1.6;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.9s ease-out;
        }
        #popupBox p.active {
            opacity: 1;
            transform: translateY(0);
        }
        #info {
            display: none;
            position: absolute;
            top: 200px;
            left: 20px;
            padding: 5px;
            background: black;
            color: black;
            width: 16%;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
            font-size: 0.8em;
            overflow-y: auto;
            height: 450px;
        }
        #control-panel {
            position: absolute;
            top: 140px;
            left: 20px;
            width: 16%;
            z-index: 1;
            background-color: none;
            border: 0px;
            padding: 10px;
            border-radius: 5px;
        }
        button {
            color: #F7F9FA;
            background-color: #292A2B;
            border: none;
            box-shadow: none;
            outline: none;
            font-size: 12px;
        }
        button:hover,
        button:focus {
            background-color: #077DAD;
        }
    </style>
</head>
<body>
<img src="question.png" alt="Help" id="helpIcon">
<div id="popupBox">
    <p><strong>Lorem Ipsam</strong><br>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco</p>
    <p><strong>Lorem Ipsam</strong><br>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco</p>
    <p><strong>Lorem Ipsam</strong><br>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco</p>
</div>
<div id="map"></div>
<div id="info">Information content goes here</div>
<div id="control-panel">
    <button id="buttonFile1">High Rainfall Scenario</button>
    <button id="buttonFile2">Low Rainfall Scenario</button>
</div>
<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function () {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                } else {
                    entry.target.classList.remove('active');
                }
            });
        }, {
            root: document.getElementById('popupBox'),
            rootMargin: '50px 50px 50px 50px',
            threshold: .9
        });

        document.querySelectorAll('#popupBox p').forEach(p => {
            observer.observe(p);
        });
    });

    document.getElementById('helpIcon').addEventListener('click', function(event) {
            var popupBox = document.getElementById('popupBox');
            popupBox.style.display = (popupBox.style.display === 'block' ? 'none' : 'block');
            event.stopPropagation();
    });


    document.getElementById('popupBox').addEventListener('click', function(event) {
        event.stopPropagation();
    });

    document.addEventListener('click', function() {
        var popupBox = document.getElementById('popupBox');
        popupBox.style.display = 'none';
    });

    const buttonFile1 = document.getElementById('buttonFile1');
    const buttonFile2 = document.getElementById('buttonFile2');
    const infoBox = document.getElementById('info');

    buttonFile1.addEventListener('click', function() {
        buttonFile1.style.backgroundColor = '#077DAD';
        buttonFile2.style.backgroundColor = '';
        infoBox.style.display = 'block';
    });

    buttonFile2.addEventListener('click', function() {
        buttonFile2.style.backgroundColor = '#077DAD';
        buttonFile1.style.backgroundColor = '';
        infoBox.style.display = 'block';
    });
</script>
<script type="text/javascript" src="script.js"></script>
<script type="text...
</html>
